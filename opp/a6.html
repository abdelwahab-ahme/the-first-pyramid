<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Hub - Abdelwahab</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:Arial;
}

body{
    display:flex;
    height:100vh;
    transition:0.4s;
}

body.dark{
    background:#0f172a;
    color:white;
}

body.light{
    background:#f1f5f9;
    color:#111;
}

/* Sidebar */
.sidebar{
    width:30%;
    background:#111827;
    color:white;
    padding:20px;
    overflow-y:auto;
}

.sidebar h2{
    text-align:center;
    margin-bottom:15px;
}

.quote{
    background:#1f2937;
    padding:10px;
    border-radius:10px;
    margin-bottom:15px;
    font-size:14px;
    text-align:center;
}

.lecture{
    padding:15px;
    margin-bottom:10px;
    background:#1f2937;
    border-radius:10px;
    cursor:pointer;
    transition:0.3s;
}

.lecture:hover{
    background:#2563eb;
}

.lecture.active{
    background:#16a34a;
}

/* Progress */
.progress-container{
    margin-top:15px;
}

.progress-bar{
    width:100%;
    height:10px;
    background:#374151;
    border-radius:5px;
    overflow:hidden;
}

.progress{
    height:100%;
    width:0%;
    background:#22c55e;
    transition:0.3s;
}

/* Timer */
.timer{
    margin-top:15px;
    text-align:center;
}

/* Buttons */
.controls{
    margin-top:15px;
    display:flex;
    flex-direction:column;
    gap:8px;
}

button{
    padding:8px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:#2563eb;
    color:white;
}

/* Content */
.content{
    width:70%;
    display:flex;
    justify-content:center;
    align-items:center;
    position:relative;
    overflow:hidden;
}

.tech-bg{
    position:absolute;
    width:100%;
    height:100%;
    background:linear-gradient(135deg,#0f172a,#1e3a8a,#312e81);
    z-index:-1;
}

.tech-bg.alt{
    background:linear-gradient(135deg,#111827,#0ea5e9,#6366f1);
}

iframe{
    width:90%;
    height:90%;
    border:none;
    border-radius:15px;
    display:none;
}

.welcome{
    font-size:26px;
    text-align:center;
}
/* ======== Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ======== */
.menu-btn{
    display:none;
    position:absolute;
    top:15px;
    left:15px;
    background:#2563eb;
    color:white;
    border:none;
    padding:10px;
    border-radius:8px;
    z-index:1000;
}

/* ======== Responsive ======== */
@media(max-width:768px){

    body{
        flex-direction:column;
    }

    .sidebar{
        position:fixed;
        width:75%;
        height:100%;
        left:-100%;
        top:0;
        z-index:999;
        transition:0.3s;
    }

    .sidebar.show{
        left:0;
    }

    .content{
        width:100%;
        height:100vh;
    }

    iframe{
        width:100%;
        height:100%;
        border-radius:0;
    }

    .menu-btn{
        display:block;
    }
}

</style>
</head>
<body class="dark">
<button class="menu-btn" onclick="toggleSidebar()">â˜°</button>

<div class="sidebar">
    <h2>ğŸ“š Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª</h2>

    <div class="quote" id="quoteBox"></div>

    <div class="lecture" onclick="openPDF(this,'./pdf/Ù…ÙˆØ§Ø±Ø¯ Ø¨Ø´Ø±ÙŠØ© 1.pdf',0)">Ù…Ø­Ø§Ø¶Ø±Ø© 1</div>
   <!-- <div class="lecture" onclick="openPDF(this,'lecture2.pdf',1)">Ù…Ø­Ø§Ø¶Ø±Ø© 2</div>
    <div class="lecture" onclick="openPDF(this,'lecture3.pdf',2)">Ù…Ø­Ø§Ø¶Ø±Ø© 3</div> -->

    <div class="progress-container">
        <p>Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙ‚Ø¯Ù…</p>
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
    </div>

    <div class="timer">
        â± ÙˆÙ‚Øª Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©: <span id="time">0</span> Ø¯Ù‚ÙŠÙ‚Ø©
    </div>

    <div class="controls">
        <button onclick="toggleMode()">ğŸŒ™ / â˜€ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹</button>
        <button onclick="changeBackground()">ğŸ¨ ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ù„ÙÙŠØ©</button>
        <button onclick="startTimer()">â–¶ Ø¨Ø¯Ø¡</button>
        <button onclick="resetTimer()">â¹ Ø¥Ø¹Ø§Ø¯Ø©</button>
        <button onclick="window.location.href='night.html'">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>

    </div>
</div>

<div class="content">
    <div class="tech-bg" id="bg"></div>

    <div class="welcome" id="welcome">
        Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ù‡ ğŸ’»ğŸ”¥
    </div>

    <div id="pdfContainer" style="width:100%;height:100%;overflow:auto;display:none;"></div>
</div>

<script>

let totalLectures = 3;
let completedLectures = JSON.parse(localStorage.getItem("completedLectures")) || [];
let seconds = parseInt(localStorage.getItem("studyTime")) || 0;
let timerInterval;

/* ØªØ­ÙÙŠØ² ÙŠÙˆÙ…ÙŠ */
const quotes = [
"ÙƒÙ„ ØµÙØ­Ø© Ø¨ØªÙ‚Ø±Ø¨Ùƒ Ù…Ù† Ø­Ù„Ù…Ùƒ ğŸ”¥",
"Ø§Ù„Ù†Ø¬Ø§Ø­ Ù…Ø­ØªØ§Ø¬ Ø§Ù„ØªØ²Ø§Ù… Ù…Ø´ Ù…Ø²Ø§Ø¬ ğŸ’ª",
"Ù…Ø³ØªÙ‚Ø¨Ù„Ùƒ Ø¨ÙŠØªØ¨Ù†ÙŠ Ø¯Ù„ÙˆÙ‚ØªÙŠ â³",
"Ø´Ø¯ Ø­ÙŠÙ„Ùƒâ€¦ Ø§Ù„ØªØ¹Ø¨ Ù…Ø¤Ù‚Øª ğŸ‘Œ",
"Ø£Ù†Øª Ù‚Ø¯Ù‡Ø§ ğŸ’»ğŸš€"
];

function setDailyQuote(){
    let today = new Date().toDateString();
    let savedDate = localStorage.getItem("quoteDate");

    if(savedDate !== today){
        let randomQuote = quotes[Math.floor(Math.random()*quotes.length)];
        localStorage.setItem("dailyQuote",randomQuote);
        localStorage.setItem("quoteDate",today);
    }

    document.getElementById("quoteBox").innerText =
        localStorage.getItem("dailyQuote");
}

/* ÙØªØ­ PDF */
function openPDF(element,file,index){

    document.querySelectorAll(".lecture")
        .forEach(el=>el.classList.remove("active"));

    element.classList.add("active");

    document.getElementById("welcome").style.display="none";

    const container = document.getElementById("pdfContainer");
    container.style.display = "block";
    container.innerHTML = "";

    const loadingTask = pdfjsLib.getDocument(file);

    loadingTask.promise.then(function(pdf) {

        for(let pageNum = 1; pageNum <= pdf.numPages; pageNum++){

            pdf.getPage(pageNum).then(function(page){

                const scale = 1.2;
                const viewport = page.getViewport({scale: scale});

                const canvas = document.createElement("canvas");
                const context = canvas.getContext("2d");

                canvas.height = viewport.height;
                canvas.width = viewport.width;
                canvas.style.width = "100%";
                canvas.style.marginBottom = "10px";

                container.appendChild(canvas);

                page.render({
                    canvasContext: context,
                    viewport: viewport
                });
            });
        }
    });

    document.querySelector(".sidebar").classList.remove("show");

    if(!completedLectures.includes(index)){
        completedLectures.push(index);
        localStorage.setItem("completedLectures",JSON.stringify(completedLectures));
        updateProgress();
    }
}




/* ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù… */
function updateProgress(){
    let percent = (completedLectures.length/totalLectures)*100;
    document.getElementById("progress").style.width=percent+"%";
}

/* Ø§Ù„ÙˆØ¶Ø¹ */
function toggleMode(){
    document.body.classList.toggle("light");
    document.body.classList.toggle("dark");
}

/* Ø§Ù„Ø®Ù„ÙÙŠØ© */
function changeBackground(){
    document.getElementById("bg").classList.toggle("alt");
}

/* Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
function startTimer(){
    clearInterval(timerInterval);
    timerInterval = setInterval(()=>{
        seconds++;
        updateTimerDisplay();
        localStorage.setItem("studyTime",seconds);
    },1000); // ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
}

function resetTimer(){
    clearInterval(timerInterval);
    seconds = 0;
    updateTimerDisplay();
    localStorage.setItem("studyTime",0);
}

function updateTimerDisplay(){
    let mins = Math.floor(seconds / 60);
    let secs = seconds % 60;
    document.getElementById("time").innerText =
        mins + ":" + (secs < 10 ? "0"+secs : secs);
}


/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­ */
window.onload=function(){
    setDailyQuote();
    updateProgress();
    updateTimerDisplay();
};

function toggleSidebar(){
    document.querySelector(".sidebar").classList.toggle("show");
}


</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</body>
</html>

